{"version":3,"file":"js/612.615265ab.js","mappings":"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","sources":["webpack://lin-cms-vue/./src/lin/model/log.js"],"sourcesContent":["import _axios, { get } from '@/lin/plugin/axios'\r\n\r\nclass Log {\r\n  name = null\r\n\r\n  start = null\r\n\r\n  end = null\r\n\r\n  keyword = null\r\n\r\n  constructor({\r\n    uPage = 0,\r\n    uCount = 5,\r\n\r\n    lPage = 0,\r\n    lCount = 10,\r\n\r\n    sPage = 0,\r\n    sCount = 10,\r\n  }) {\r\n    if (uPage === 0) {\r\n      this.uPage = uPage\r\n    }\r\n    if (uCount) {\r\n      this.uCount = uCount\r\n    }\r\n    if (lPage === 0) {\r\n      this.lPage = lPage\r\n    }\r\n    if (lCount) {\r\n      this.lCount = lCount\r\n    }\r\n    if (sPage === 0) {\r\n      this.sPage = sPage\r\n    }\r\n    if (sCount) {\r\n      this.sCount = sCount\r\n    }\r\n  }\r\n\r\n  async increaseUpage() {\r\n    this.uPage += 1\r\n  }\r\n\r\n  async increaseLpage() {\r\n    this.lPage += 1\r\n  }\r\n\r\n  increaseSpage() {\r\n    this.sPage += 1\r\n  }\r\n\r\n  init() {\r\n    this.lPage = 0\r\n    this.uPage = 0\r\n    this.sPage = 0\r\n  }\r\n\r\n  setBaseInfo(name, start, end) {\r\n    this.name = name\r\n    this.start = start\r\n    this.end = end\r\n  }\r\n\r\n  setKeyword(keyword) {\r\n    this.keyword = keyword\r\n  }\r\n\r\n  async addTestLog() {\r\n    const log = await get('cms/test/info')\r\n    return log\r\n  }\r\n\r\n  /**\r\n   * 查询已经被记录过日志的用户（分页）\r\n   * @param {number} count 每页个数\r\n   * @param {number} page 第几页\r\n   */\r\n  async getLoggedUsers({ count, page }) {\r\n    const users = await get('cms/log/users', {\r\n      count: count || this.uCount,\r\n      page: page || this.uPage,\r\n    })\r\n    return users\r\n  }\r\n\r\n  /**\r\n   * 查询日志信息（分页）\r\n   * @param {number} count 每页个数\r\n   * @param {number} page 第几页\r\n   * @param {number} name 用户昵称\r\n   * @param {number} start 起始时间 # 2018-11-01 09:39:35\r\n   * @param {number} end 结束时间\r\n   */\r\n  async getLogs({ count, page, name, start, end, next = false }) {\r\n    if (!next) {\r\n      this.setBaseInfo(name, start, end)\r\n    }\r\n    if (page === 0) {\r\n      this.lPage = 0\r\n    }\r\n    const res = await _axios({\r\n      url: 'cms/log',\r\n      params: {\r\n        count: count || this.lCount,\r\n        page: page || this.lPage,\r\n        name: name || this.name,\r\n        start: start || this.start,\r\n        end: end || this.end,\r\n      },\r\n      handleError: true,\r\n    })\r\n    return res\r\n  }\r\n\r\n  /**\r\n   * 所搜日志信息（分页）\r\n   * @param {number} count 每页个数\r\n   * @param {number} page 第几页\r\n   * @param {number} keyword 搜索关键词\r\n   * @param {number} name 用户昵称\r\n   * @param {number} start 起始时间 # 2018-11-01 09:39:35\r\n   * @param {number} end 结束时间\r\n   */\r\n  async searchLogs({ count, page, keyword, name, start, end, next = false }) {\r\n    if (!next) {\r\n      this.setBaseInfo(name, start, end)\r\n      this.setKeyword(keyword)\r\n    }\r\n    if (page === 0) {\r\n      this.sPage = 0\r\n    }\r\n    try {\r\n      const res = await get('cms/log/search', {\r\n        count: count || this.sCount,\r\n        page: page || this.sPage,\r\n        keyword: keyword || this.keyword,\r\n        name: name || this.name,\r\n        start: start || this.start,\r\n        end: end || this.end,\r\n      })\r\n      return res\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  async moreUserPage() {\r\n    await this.increaseUpage()\r\n    return this.getLoggedUsers({})\r\n  }\r\n\r\n  async moreLogPage() {\r\n    await this.increaseLpage()\r\n    return this.getLogs({ next: true })\r\n  }\r\n\r\n  async moreSearchPage() {\r\n    this.increaseSpage()\r\n    return this.searchLogs({ next: true })\r\n  }\r\n}\r\n\r\nexport default new Log({})\r\n"],"names":["Log","uPage","uCount","lPage","lCount","sPage","sCount","this","name","start","end","keyword","get","log","count","page","users","next","setBaseInfo","_axios","url","params","handleError","res","setKeyword","console","increaseUpage","getLoggedUsers","increaseLpage","getLogs","increaseSpage","searchLogs"],"sourceRoot":""}