{"version":3,"file":"js/2664.67379138.js","mappings":"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","sources":["webpack://lin-cms-vue/./src/lin/model/admin.js","webpack://lin-cms-vue/./src/view/admin/group/use-group.js","webpack://lin-cms-vue/./src/view/admin/group/group-list.vue","webpack://lin-cms-vue/./src/view/admin/group/group-list.vue?4605"],"sourcesContent":["/* eslint-disable class-methods-use-this */\r\nimport { post, get, put, _delete } from '@/lin/plugin/axios'\r\n\r\nexport default class Admin {\r\n  constructor(uPage = 0, uCount = 10, gPage = 0, gCount = 5) {\r\n    this.uPage = uPage\r\n    this.uCount = uCount\r\n    this.lPage = gPage\r\n    this.gCount = gCount\r\n  }\r\n\r\n  async increaseUPage() {\r\n    this.uPage += 1\r\n  }\r\n\r\n  async increaseGPage() {\r\n    this.lPage += 1\r\n  }\r\n\r\n  async decreaseUPage() {\r\n    this.uPage -= 1\r\n    if (this.uPage < 0) {\r\n      this.uPage = 0\r\n    }\r\n  }\r\n\r\n  async decreaseGPage() {\r\n    this.lPage -= 1\r\n    if (this.lPage < 0) {\r\n      this.lPage = 0\r\n    }\r\n  }\r\n\r\n  static getAllPermissions() {\r\n    return get('cms/admin/permission')\r\n  }\r\n\r\n  static async getAdminUsers({ groupId, count = this.uCount, page = this.uPage }) {\r\n    let res\r\n    if (groupId) {\r\n      res = await get('cms/admin/users', {\r\n        count,\r\n        page,\r\n        group_id: groupId,\r\n      })\r\n    } else {\r\n      res = await get('cms/admin/users', {\r\n        count,\r\n        page,\r\n      })\r\n    }\r\n    return res\r\n  }\r\n\r\n  async nextUsersPage() {\r\n    await this.increaseUPage()\r\n    return this.getAdminUsers({})\r\n  }\r\n\r\n  async preUsersPage() {\r\n    await this.decreaseUPage()\r\n    return this.getAdminUsers({})\r\n  }\r\n\r\n  async getGroupsWithPermissions({ count = this.uCount, page = this.uPage }) {\r\n    const res = await get('cms/admin/groups', {\r\n      count,\r\n      page,\r\n    })\r\n    return res\r\n  }\r\n\r\n  async nextGroupsPage() {\r\n    await this.increaseGPage()\r\n    return this.getGroupsWithPermissions({})\r\n  }\r\n\r\n  async preGroupsPage() {\r\n    await this.decreaseGPage()\r\n    return this.getGroupsWithPermissions({})\r\n  }\r\n\r\n  static async getAllGroups() {\r\n    const groups = await get('cms/admin/group/all')\r\n    return groups\r\n  }\r\n\r\n  static async getOneGroup(id) {\r\n    const group = await get(`cms/admin/group/${id}`)\r\n    return group\r\n  }\r\n\r\n  // eslint-disable-next-line camelcase\r\n  static async createOneGroup(name, info, permission_ids) {\r\n    const res = await post('cms/admin/group', {\r\n      name,\r\n      info,\r\n      permission_ids,\r\n    })\r\n    return res\r\n  }\r\n\r\n  static async updateOneGroup(name, info, id) {\r\n    const res = await put(`cms/admin/group/${id}`, {\r\n      name,\r\n      info,\r\n    })\r\n    return res\r\n  }\r\n\r\n  static async deleteOneGroup(id) {\r\n    const res = await _delete(`cms/admin/group/${id}`)\r\n    return res\r\n  }\r\n\r\n  static async deleteOneUser(id) {\r\n    const res = await _delete(`cms/admin/user/${id}`)\r\n    return res\r\n  }\r\n\r\n  // eslint-disable-next-line camelcase\r\n  static async updateOneUser(email, group_ids, id) {\r\n    const res = await put(`cms/admin/user/${id}`, {\r\n      email,\r\n      group_ids,\r\n    })\r\n    return res\r\n  }\r\n\r\n  // eslint-disable-next-line camelcase\r\n  static async dispatchPermissions(group_id, permission_ids) {\r\n    const res = await post('cms/admin/permission/dispatch/batch', {\r\n      group_id,\r\n      permission_ids,\r\n    })\r\n    return res\r\n  }\r\n\r\n  // eslint-disable-next-line camelcase\r\n  static async changePassword(new_password, confirm_password, id) {\r\n    const res = await put(`cms/admin/user/${id}/password`, {\r\n      new_password,\r\n      confirm_password,\r\n    })\r\n    return res\r\n  }\r\n\r\n  // eslint-disable-next-line camelcase\r\n  static async removePermissions(group_id, permission_ids) {\r\n    const res = await post('cms/admin/permission/remove', {\r\n      group_id,\r\n      permission_ids,\r\n    })\r\n    return res\r\n  }\r\n}\r\n","import { ref, onMounted, reactive } from 'vue'\r\nimport { ElMessageBox, ElMessage } from 'element-plus'\r\nimport AdminModel from '@/lin/model/admin'\r\n\r\nexport const useGroupList = () => {\r\n  const tableData = ref([]) // 表格数据\r\n  const loading = ref(false)\r\n\r\n  /**\r\n   * 获取所有分组并传给table渲染\r\n   */\r\n  const getAllGroups = async () => {\r\n    try {\r\n      loading.value = true\r\n      tableData.value = await AdminModel.getAllGroups()\r\n      loading.value = false\r\n    } catch (e) {\r\n      loading.value = false\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 删除某项数据\r\n   * @param {object} id 选中的一行数据 ID\r\n   */\r\n  const handleDelete = id => {\r\n    let res = {}\r\n    ElMessageBox.confirm('此操作将永久删除该分组, 是否继续?', '提示', {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消',\r\n      type: 'warning',\r\n    }).then(async () => {\r\n      try {\r\n        loading.value = true\r\n        res = await AdminModel.deleteOneGroup(id)\r\n      } catch (e) {\r\n        loading.value = false\r\n        console.log(e)\r\n      }\r\n      if (res.code < window.MAX_SUCCESS_CODE) {\r\n        await getAllGroups()\r\n        ElMessage.message({ type: 'success', message: `${res.message}` })\r\n      } else {\r\n        loading.value = false\r\n        ElMessage.message({ type: 'error', message: `${res.message}` })\r\n      }\r\n    })\r\n  }\r\n\r\n  onMounted(async () => {\r\n    await getAllGroups()\r\n  })\r\n\r\n  return {\r\n    loading,\r\n    tableData,\r\n    handleDelete,\r\n    getAllGroups,\r\n  }\r\n}\r\n\r\nexport const useEditGroup = (ctx, getAllGroups) => {\r\n  let cacheGroup = {}\r\n  const id = ref(0) // 分组id\r\n  const form = ref(null)\r\n  const group = reactive({ name: '', info: '' })\r\n  const dialogFormVisible = ref(false) // 是否弹窗\r\n  const rules = {\r\n    // 表单验证规则\r\n    info: [],\r\n    name: [{ required: true, message: '请输入分组名称', trigger: 'blur' }],\r\n  }\r\n\r\n  /**\r\n   * 获取所拥有的权限并渲染  由子组件提供\r\n   * @param {*} val 选中的某行数据\r\n   */\r\n  const handleEdit = row => {\r\n    id.value = row.id\r\n    group.name = row.name\r\n    group.info = row.info\r\n    cacheGroup = { ...group }\r\n    dialogFormVisible.value = true\r\n  }\r\n\r\n  /**\r\n   * 修改分组信息\r\n   */\r\n  const confirmEdit = async () => {\r\n    if (group.name === '') {\r\n      ElMessage.warning('请将信息填写完整')\r\n      return\r\n    }\r\n    if (cacheGroup.name !== group.name || cacheGroup.info !== group.info) {\r\n      const res = await AdminModel.updateOneGroup(group.name, group.info, id.value)\r\n      if (res.code < window.MAX_SUCCESS_CODE) {\r\n        ElMessage.success(`${res.message}`)\r\n        getAllGroups()\r\n      }\r\n    }\r\n    dialogFormVisible.value = false\r\n  }\r\n\r\n  const handleClose = done => {\r\n    done()\r\n  }\r\n  const rowDoubleClick = row => {\r\n    handleEdit(row)\r\n  }\r\n  const resetForm = () => {\r\n    form.value.resetFields()\r\n  }\r\n\r\n  return {\r\n    id,\r\n    form,\r\n    rules,\r\n    group,\r\n    resetForm,\r\n    handleEdit,\r\n    confirmEdit,\r\n    handleClose,\r\n    rowDoubleClick,\r\n    dialogFormVisible,\r\n  }\r\n}\r\n","<template>\r\n  <!-- 列表页面 -->\r\n  <div class=\"container\">\r\n    <div class=\"title\">分组列表信息</div>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" @row-dblclick=\"rowDoubleClick\">\r\n      <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n      <el-table-column prop=\"info\" label=\"分组描述\"></el-table-column>\r\n      <el-table-column label=\"操作\" fixed=\"right\" width=\"275\">\r\n        <template #default=\"scope\">\r\n          <el-button plain size=\"small\" type=\"primary\" @click=\"handleEdit(scope.row)\">信息</el-button>\r\n          <el-button plain size=\"small\" type=\"info\" @click=\"goToGroupEditPage(scope.row.id)\">权限</el-button>\r\n          <el-button plain size=\"small\" type=\"danger\" @click=\"handleDelete(scope.row.id)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分组信息 -->\r\n    <el-dialog title=\"分组信息\" :append-to-body=\"true\" v-model=\"dialogFormVisible\" :before-close=\"handleClose\">\r\n      <div style=\"margin-top: -25px\">\r\n        <el-form\r\n          ref=\"form\"\r\n          status-icon\r\n          :rules=\"rules\"\r\n          :model=\"group\"\r\n          label-width=\"120px\"\r\n          v-if=\"dialogFormVisible\"\r\n          label-position=\"labelPosition\"\r\n          style=\"margin-left: -35px; margin-bottom: -35px; margin-top: 15px\"\r\n        >\r\n          <el-form-item label=\"分组名称\" prop=\"name\">\r\n            <el-input clearable v-model=\"group.name\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"分组描述\" prop=\"info\">\r\n            <el-input clearable v-model=\"group.info\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <template #footer>\r\n        <div class=\"dialog-footer\" style=\"padding-left: 5px\">\r\n          <el-button type=\"primary\" @click=\"confirmEdit\">确 定</el-button>\r\n          <el-button @click=\"resetForm\">重 置</el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter } from 'vue-router'\r\nimport { useGroupList, useEditGroup } from './use-group'\r\n\r\nexport default {\r\n  setup(props, ctx) {\r\n    const router = useRouter()\r\n    /**\r\n     * 分组列表所需数据\r\n     */\r\n    const { tableData, loading, handleDelete, getAllGroups } = useGroupList()\r\n\r\n    /**\r\n     * 编辑分组信息\r\n     */\r\n    const {\r\n      id,\r\n      form,\r\n      rules,\r\n      group,\r\n      resetForm,\r\n      handleEdit,\r\n      confirmEdit,\r\n      handleClose,\r\n      rowDoubleClick,\r\n      dialogFormVisible,\r\n    } = useEditGroup(ctx, getAllGroups)\r\n\r\n    /**\r\n     * 前往修改分组权限页\r\n     */\r\n    const goToGroupEditPage = groupId => {\r\n      id.value = groupId\r\n      router.push({ path: '/admin/group/edit', query: { id: groupId } })\r\n    }\r\n\r\n    return {\r\n      id,\r\n      form,\r\n      rules,\r\n      group,\r\n      loading,\r\n      tableData,\r\n      resetForm,\r\n      handleEdit,\r\n      confirmEdit,\r\n      handleClose,\r\n      handleDelete,\r\n      rowDoubleClick,\r\n      goToGroupEditPage,\r\n      dialogFormVisible,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  padding: 0 30px;\r\n\r\n  .title {\r\n    height: 59px;\r\n    line-height: 59px;\r\n    color: $parent-title-color;\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./group-list.vue?vue&type=template&id=1cad4994&scoped=true\"\nimport script from \"./group-list.vue?vue&type=script&lang=js\"\nexport * from \"./group-list.vue?vue&type=script&lang=js\"\n\nimport \"./group-list.vue?vue&type=style&index=0&id=1cad4994&lang=scss&scoped=true\"\n\nimport exportComponent from \"E:\\\\postgraduatecode\\\\lin-cms-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1cad4994\"]])\n\nexport default __exports__"],"names":["Admin","uPage","uCount","gPage","gCount","this","lPage","increaseUPage","getAdminUsers","decreaseUPage","count","page","get","res","increaseGPage","getGroupsWithPermissions","decreaseGPage","groupId","group_id","groups","id","group","name","info","permission_ids","post","put","_delete","email","group_ids","new_password","confirm_password","useGroupList","tableData","ref","loading","getAllGroups","value","AdminModel","console","error","handleDelete","ElMessageBox","confirmButtonText","cancelButtonText","type","then","log","code","window","MAX_SUCCESS_CODE","ElMessage","message","onMounted","useEditGroup","ctx","cacheGroup","form","reactive","dialogFormVisible","rules","required","trigger","handleEdit","row","confirmEdit","handleClose","done","rowDoubleClick","resetForm","resetFields","class","style","data","prop","label","fixed","width","default","plain","size","scope","goToGroupEditPage","title","footer","model","clearable","setup","props","router","push","path","query","__exports__","render"],"sourceRoot":""}